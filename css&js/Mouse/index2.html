<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title>打地鼠</title>
		<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
		<style type="text/css">
			body {
				background: url(image/bg.jpg) no-repeat;
				font-size: 12px;
				font-family: "宋体";
			}
			
			#form {
				width: 280px;
				height: 170px;
				position: absolute;
				top: 10px;
				left: 460px;
			}
			
			#note {
				width: 170px;
				height: 170px;
				position: absolute;
				left: 740px;
				top: 10px;
				color: blue;
			}
			
			#author {
				width: 350px;
				height: 140px;
				position: absolute;
				left: 740px;
				top: 180px;
				color: blue;
			}
			
			#tablle {
				width: 350px;
				height: 350px;
				position: absolute;
				left: 260px;
				top: 200px;
				cursor: url(image/hammer_48px_1157892_easyicon.net.png), auto;
			}
		</style>
	</head>

	<body>
		<!--第一部分-->
		<div id="form">
			<table border="0" cellspacing="0" cellpadding="0">
				<tr>
					<th>游戏时间</th>
					<th><input type="" name="" value="1" size="10" id="totalTime"/> 分钟</th>
				</tr>
				<tr>
					<td>倒计时间：</td>
					<td><div id="countTime"></div></td>
				</tr>
				<tr>
					<td>地鼠出现间隔：</td>
					<td><input type="" name="" value="1" size="10" id="showTime" /> 秒钟</td>
				</tr>
				<tr>
					<td>停留时间：</td>
					<td><input type="" name="" value="1" size="10" id="stayTime" /> 秒钟</td>
				</tr>
				<tr>
					<td>得分情况</td>
					<td>
						<div id="score"></div>
					</td>
				</tr>
				<tr>
					<td><input type="button" name="" id="" value="开始游戏" onclick="startGame()" /></td>
					<td><input type="button" name="" id="" value="结束游戏" onclick="stopGame()" /></td>
				</tr>
			</table>
		</div>
		<!--第二部分-->
		<div id="note">
			<p align="center">游戏说明</p>
			<p>点击开始按钮，地鼠就出现了，然后点击地鼠打地鼠，可以打了，打中给你100分，没打中，扣你200分，你还不来试试吗？</p>
		</div>
		<!--第三部分-->
		<div id="author">
			<p>作者：*** <br />指导老师：***</p>
		</div>
		<!--第四部分-->
		<div id="tablle">
			<table border="2" cellspacing="1" cellpadding="1">
				<tr>
					<td><img src="image/00.jpg" alt="0" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="1" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="2" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="3" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="4" onclick="hitMouse(this)"/></td>
				</tr>
				<tr>
					<td><img src="image/00.jpg" alt="5" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="6" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="7" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="8" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="9" onclick="hitMouse(this)"/></td>
				</tr>
				<tr>
					<td><img src="image/00.jpg" alt="10" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="11" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="12" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="13" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="14" onclick="hitMouse(this)"/></td>
				</tr>
				<tr>
					<td><img src="image/00.jpg" alt="15" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="16" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="17" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="18" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="19" onclick="hitMouse(this)"/></td>
				</tr>
				<tr>
					<td><img src="image/00.jpg" alt="20" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="21" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="22" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="23" onclick="hitMouse(this)"/></td>
					<td><img src="image/00.jpg" alt="24" onclick="hitMouse(this)"/></td>
				</tr>
			</table>
		</div>

	</body>
	<script type="text/javascript">
//		var time = null;
//
//		function start() {
//			console.log("1");
//			clearInterval(time);
//			time = setInterval(function() {
//				var x = 1,
//					y = 25;
//				var rand = parseInt(Math.random() * y);
//				$("img").attr("src", "image/00.jpg").eq(rand).attr("src", "image/01.jpg");
//			}, 1000)
//			$('img').click(function() {
//				$("img").eq(this.alt).attr("src", "image/02.jpg");
//			})
//		}
//
//		function end() {
//			clearInterval(time);
//			$("img").attr("src", "image/00.jpg");
//		}
		//声明变量
		var totalTime,showTime,stayTime,score,t1,t2,t3,flag=false;
		
		function startGame(){
			flag=!flag;
			if(flag){
				init();
				countTime();
				showMouse();
			}else{
				clearTimeout(t1);
				clearTimeout(t2);
				clearTimeout(t3);
				document.getElementById("score").innerHTML="";
				document.getElementById("countTime").innerHTML="";
				var imgs=document.images;
				for(var i=0;i<imgs.length;i++){
					imgs[i].src="image/00.jpg";
				}
				alert("重新开始");
			}
			
		}
		
		
		//函数：获取到表单中的文本框的值，赋值给变量
		function init(){
			score=0;
			totalTime=document.getElementById('totalTime').value*60;
			showTime=document.getElementById("showTime").value;
			stayTime=document.getElementById("stayTime").value;
		}
		//倒计时开始
		//根据游戏时间来倒计时
		function countTime(){
//			console.log(totalTime)
			//如果倒计时到0的时候，游戏自动结束
			if(totalTime<1){
				//结束游戏
//				clearTimeout(t1);
//				clearTimeout(t2);
//				clearTimeout(t3);
//				return;
				stopGame();
				return;
			}
			totalTime--;
			//吧变量放入前段的倒计时中
			document.getElementById('countTime').innerHTML=totalTime+'秒';
			//window对象下自带的一个函数，计时器函数
			//第一个参数是多久调用以下这个函数
			//多久 毫秒
			t1=setTimeout(countTime,1000);	
		}
		//老鼠随机出现
		function showMouse(){
			var i=parseInt(Math.random()*24);
			document.images[i].src="image/01.jpg";
			t2=setTimeout(showMouse,showTime*1000);
			//多久老鼠消失
			t3=setTimeout("disappearMouse("+i+")",stayTime*1000);
		}
		function disappearMouse(index){
			//那个img对象
			var img=document.images[index];
			console.log(index);
			//img的路径
			var fileName=img.src;
			//image\00.jpg 截取到00.jpg
			fileName=fileName.substring(fileName.length-6,fileName.length);
			//如果老鼠消失之前，仍然还是01.jpg那么，说明没有打击老鼠
			if(fileName=='01.jpg'){
				img.src="image/03.jpg";
				score-=200;
			}
			//分数放入前端
			document.getElementById("score").innerHTML=score+"分";
			//老鼠消失
			img.src="image/00.jpg"
		}
		//打击地鼠
		function hitMouse(obj){
			//获取到点击的这张图片的src
			var fileName=obj.src;
			//image\00.jpg 截取到00.jpg
			fileName=fileName.substring(fileName.length-6,fileName.length);
			//如果你点击的这个图片正好是老鼠出现的这张图片，你打中了老鼠
			if(fileName=='01.jpg'){
				score+=100;
				obj.src="image/02.jpg";
				//分数放入前端
				document.getElementById("score").innerHTML=score+"分";
			}
		}
		//结束游戏
		//1.让倒计时，得分显示没有2.让老鼠停止出现3.把所有的背景还原
		function stopGame(){
			document.getElementById("score").innerHTML="";
			document.getElementById("countTime").innerHTML="";
			//清除计时器
			clearTimeout(t1);
			clearTimeout(t2);
			clearTimeout(t3);
			//得到所有的img组成的数组
			var imgs=document.images;
			for(var i=0;i<imgs.length;i++){
				imgs[i].src="image/00.jpg";
			}
			//给用户弹框 告诉多少分
			alert("总共获取了"+score+"分，继续努力");
		}
	</script>

</html>